import Hideable from '@components/Hideable.astro'
import Remarque from '@components/Remarque.astro'
import Exercice from '@components/Exercice.astro'
import Item from '@components/Item.astro'
import Indent from '@components/Indent.astro'
import Fil from '@components/Fil.astro'

import IllustrationLimite from '@components/Graph/continuité.astro'


<Fil>

Essayons de définir la limite d'une fonction en un point $a$. Nous allons nous baser sur la notion déjà vue dans le chapitre sur les suites : être $\varepsilon$-proche de la limite $l$.

Si on a $l \in \R$ et $a \in \R$. Dire que $f$ converge en $a$ vers $l$, c'est dire que $f(x)$ est $\varepsilon$-proche de $l$ en choisissant $x$ suffisamment proche de $a$ (mais différent de $a$ parce qu'il est évident que $f(a)$ est $\varepsilon$-proche de $l$ si $l = f(a)$).

<br/>

On représente sur l'exemple interactif ci-dessous le calcul de telles zones autour de $a$ qui donnent images $\varepsilon$-proches de $l = f(a)$. On a choisi $\varepsilon = 1$.

<br/>

<IllustrationLimite/>

<br/>

On remarque que, plus la courbe est "plate", plus la plage autour de $a$ est grande. Inversement, plus la pente est grande, plus la plage autour de $a$ est petite.

En clair, s'il y a un saut, la plage sera infiniement petite si l'on prend $\varepsilon$ suffisamment petit. On comprend donc que cette approche nous permet de distinguer quand il y a un "saut" dans le tracé de la fonction.

<br/>

On construit ainsi la définition de la limite de $f$ en $a$ qui, encore une fois, demande à vérifier d'être $\varepsilon$-proche pour tout choix de $\varepsilon$ :

pour tout $\varepsilon > 0$, il existe un intervalle ouvert contenant $a$ dont les images par $f$ sont toutes $\varepsilon$-proches de $l$.

</Fil>


<Item type='definition' titre="limite finie d'une fonction en un point" searchDesc="converge">

On dit que $f$ admet une limite $l$ en $a$ si :

$$
\forall \varepsilon > 0 \v \exists \eta > 0 \mid \forall x \in I \v \Big( |x - a| < \eta \Rightarrow |f(x)  - l| < \varepsilon \Big)
$$

Dans ce cas, on note $ \limm{x \to a} f(x) = l$ ou encore $ f(x) \limto{x \to a} l $. On dit que $f$ converge en $a$ vers la valeur $a$.

</Item>


<Remarque titre=''>

Dans la définition, on peut remplacer $|f(x)  - l| < \varepsilon$ par $|f(x)  - l| \leqslant \varepsilon$. On peut faire de même pour $|x - a| < \eta$. 

**Attention cependant :** $\eta$ et $\varepsilon$ doivent être **__STRICTEMENT__** positifs.
 
</Remarque>

<Item type='definition' titre="limite infinie d'une fonction en un point" searchDesc="diverge">

On suppose que $I$ a un bord ouvert en le point $b$.

On dit que $f$ tend vers $+ \infty$ en $b$ si :

$$
\forall A > 0 \v \exists \eta > 0 \mid \forall x \in I \v \Big( |x - b| < \eta \Rightarrow f(x) > A \Big)
$$

Dans ce cas, on note $ \limm{x \to b} f(x) = + \infty$ ou encore $ f(x) \limto{x \to b} + \infty$.

<br />

Le cas $- \infty$ est analogue en remplaçant $A > 0$ par $A < 0$ mais également $f(x) > A$ par $f(x) < A$.
</Item>

<Exercice titre=''>

1\) Démontrer que la fonction $f$ définie sur $\R$ par $f(x) = \dfrac{x^2 - 1}{x-1}$ si $x \neq 1$ et par $f(1) = 2$ admet une limite en $1$ à l'aide de la définition.

2\) Démontrer que $g : x \mapsto x^2$ définie sur $\R$ admet une limite en $3$ à l'aide de la définition.

</Exercice>

<Hideable type='solution' titre=''>

1\)
Remarquons déjà que si $x \neq 1$ , alors $f(x) = \dfrac{(x-1)(x+1)}{x-1} = x+1$. 

**Analyse :** Supposons qu'il y ait un $\eta$ qui convienne.

$\cd$ si $x \neq 1$, $|f(x) - f(1)| = |x+1 - 2| = |x-1| < \eta \leqslant \varepsilon$

**Synthèse :** on vérifie que $\eta = \varepsilon$ permet d'obtenir l'inégalité voulue par les mêmes calculs.

**Conclusion :** $f$ est continue en $1$.


<br/>
2\) Soit $\varepsilon > 0$. 

On souhaite trouver un $\eta$ qui vérifie que : $|x-3| <  \eta \Rightarrow |g(x) - g(3)| = |x^2 - 9| < \varepsilon$

**Analyse :** si l'on suppose que l'on a un tel $\eta$, alors $|x^2 - 9| = |x-3| . |x + 3| \leqslant \eta . \underbrace{|x + 3|}_{= |x-3 + 3 + 3|} \leqslant \eta^2 . 6$.

Mais alors $\eta^2 . 6 \leqslant \varepsilon$ permettrait d'obtenir l'égalité ce qui mène à $\eta \leqslant \sqrt{\dfrac{\varepsilon}{6}}$ par croissance de la racine carrée.

**Synthèse :** on vérifie par les mêmes inégalités que $\eta = \sqrt{\dfrac{\varepsilon}{6}}$ convient.

**Conclusion :** $g$ est continue en $3$.

</Hideable>

<Item type='definition' titre="limites d'une fonction en l'infini" searchDesc="bords">

Si $I$ est non majoré, on dit que $f$ admet une limite $l$ en $+ \infty$ si :

$$
\forall \varepsilon > 0 \v \exists A \in \R \mid \forall x \in I \v \Big( x > A \Rightarrow |f(x) - l| < \varepsilon \Big)
$$


on dit que $f$ tend vers $+ \infty$ en $+ \infty$ si :

$$
\forall A > 0 \v \exists B \in \R \mid \forall x \in I \v \Big( x > B \Rightarrow f(x) > A \Big)
$$
</Item>

<Item type='proposition' titre="unicité de la limite d'une fonction">

Si $f$ admet en $a$ pour limite $l$ et $l'$, alors $l = l'$.
</Item>

<Hideable type='démonstration' titre=''>

Soit $\varepsilon > 0$. Il existe $\eta _1 > 0$ et $\eta _2 > 0$ tels que :

$\cd$ $x \in I $ et $ |x - a| < \eta _1 \Rightarrow |f(x) - l| < \varepsilon$ 

$\cd$ $x \in I $ et $ |x - a| < \eta _2 \Rightarrow |f(x) - l'| < \varepsilon$ 

Soit $\eta = \min( \eta_1 \v \eta_2)$ et soit $x \in I$ tel que $|x-a| < \eta$. 

On a : $\begin{cases} |f(x) - l| < \varepsilon \\ |f(x) - l'| < \varepsilon\end{cases}$

Mais donc $\begin{cases} - \varepsilon < f(x) - l < \varepsilon \\ - \varepsilon  f(x) - l'< \varepsilon\end{cases}$

Par différence, $ - 2 \varepsilon < l - l' < 2 \varepsilon$. Ceci étant vrai pour tout $\varepsilon > 0$, on en conclut que $l' = l$.
</Hideable>

<Item type='proposition' titre='linéarité de la limite' searchDesc="combinaison addition somme scalaire">

Soient $\lambda$ et $\mu$ deux réels. Si $\limm{x \to a} f(x) = l$ et $\limm{x \to a} g(x) = l'$, on a :

$$
\limm{x \to a} \Big(\lambda . f(x) + \mu . g(x) \Big) = \lambda . \limm{x \to a} f(x) + \mu . \limm{x \to a} g(x) = \lambda . l + \mu l'
$$
</Item>

<Hideable type='démonstration' titre=''>

Soit $\varepsilon > 0$ , il existe $\eta_1$ et $\eta_2$ convenant pour les limites de $f$ en $a$ et $g$ en $a$ dans cet ordre.

On pose $\eta = \min(\eta_1 \v \eta_2)$. On a donc, si $x \in I$ et $|x - a| < \eta$ : 

$$
|(\lambda . f(x) - \mu . g(x)) - (\lambda . l + \mu . l')| \leqslant |\lambda| . |f(x) - l| + |\mu| . |g(x) - l'| < |\lambda| . \varepsilon + |\mu| . \varepsilon  = (|\lambda| + |\mu| ) . \varepsilon \quad \text{(In. 1)}
$$

Soit $\tilde{\varepsilon} = \dfrac{\varepsilon}{|\lambda| + |\mu|}$ (ou $1$ si $\lambda = \mu = 0$). 

Par définition de la convergence, il existe $\tilde{\eta_1}$ et $\tilde{\eta_2}$ tels que : 

$$
\begin{cases}
\forall x \in I \v \Big( |x - a| < \tilde{\eta_1} \Rightarrow |f(x) - l| < \tilde{\varepsilon} \Big)
\\
\forall x \in I \v \Big( |x - a| < \tilde{\eta_2} \Rightarrow |g(x) - l'| < \tilde{\varepsilon} \Big)
\end{cases}
$$

Mais donc, avec $\tilde{\eta} = \min(\tilde{\eta_1}\v \tilde{\eta_2})$, et en appliquant l'inégalité (In. 1), on a :

$\forall x \in I \v \Big( |x - a| < \tilde{\eta} \Rightarrow |(\lambda . f(x) - \mu . g(x)) - (\lambda . l + \mu . l')| < \varepsilon  \Big)$
</Hideable>


<Item type='proposition' titre="limite d'une fonction et bornes" searchDesc="voisinage">

Si $f$ est continue en $a$, il existe un intervalle ouvert $J \subset I$ contenant $a$ tel que $f_{\mid J}$ soit bornée.

On dit que $f$ est bornée au voisinage de $a$.
</Item>

<Hideable type='démonstration' titre=''>

Soit $\varepsilon = 1$. 

Il existe $\eta>0$ tel que $f(\defoo{a- \eta}{ a+ \eta}) \subset \defff{f(a)-1}{f(a)+1}$. 

Donc $f$ est bornée (par $f(a)-1$ et $f(a) + 1$) sur $\defoo{a- \eta}{ a+ \eta}$ et $a \in \defoo{a- \eta}{ a+ \eta}$.

D'où le résultat
</Hideable>

<Item type='proposition' titre='opérations et limites de fonctions' searchDesc="somme addition produit multiplication quotient division">

 Si $\limm{x \to a} f(x) = l$ et $\limm{x \to a} g(x) = l'$, on a :

 $\cd$ $\limm{x \to a} f(x) . g(x) = l . l' $

 $\cd$ si $l' \neq 0$ : $\limm{x \to a} \dfrac{f(x)}{g(x)} = \dfrac{l}{l'}$
</Item>

<Hideable type='démonstration' titre=''>

$\cd$ **Démonstration pour le produit :** Nous allons réutiliser une astuce importante qu'il faut connaître : celle d'ajouter et soustraire un terme qui nous arrange!

Soit $\varepsilon > 0$ et soient $\eta_f$ et $\eta_g$ convenant pour la continuité de $f$ et $g$ en $a$.

$|f(x).g(x) - l.l'| = |f(x).g(x) - f(x) . l' + f(x) . l' - l.l'| \leqslant |f(x).g(x) - f(x) . l'| + |f(x) . l' - l.l'| $

Mais donc $|f(x).g(x) - l.l'| \leqslant |f(x)| . |g(x) - l'| + |l'| . |f(x) - l|$.

On considère les intervalles ouverts $J_f$ et $J_g$ contenant $a$ tels que $f$ et $g$ y soient bornés dans cet ordre. On pose $J = J_f \bigcap J_g$ qui est également un intervalle ouvert contenant $a$. On note alors $M$ ($M > 0$) un majorant de $|f|$ __ET__ de $|g|$ sur $J$.

Soit $\eta > 0$ tel que $\defoo{a-\eta}{a+\eta} \subset J \bigcap \defoo{a-\eta_f}{a+\eta_f} \bigcap \defoo{a-\eta_g}{a+\eta_g}$ (on rappelle qu'une intersection d'intervalles est un intervalle, on peut également vérifier que $J \bigcap \defoo{a-\eta_f}{a+\eta_f} \bigcap \defoo{a-\eta_g}{a+\eta_g}$ est ouvert).

On a alors $|x - a| < \eta \Rightarrow |f(x).g(x) - l . l'| \leqslant |f(x)| . |g(x) - l'| + |l'| . |f(x) - l| \leqslant M . \varepsilon + |l'|. M = \varepsilon . (M + |l'|)$

On pose $\tilde{\varepsilon} = \dfrac{\varepsilon}{M + |l'|}$, ce qui permet de conclure.


$\cd$ **Démonstration pour le quotient :** en réalité, il suffit de démontrer la continuité de $\dfrac{1}{g}$ en $a$ car le quotient peut être vu comme un produit.

Soient $\dfrac{l'}{2} \geqslant \varepsilon > 0$ et $\eta$ convenant pour la continuité de $g$ en $a$. On pose $x \in I$ tel que $|x-a| < \eta$. On suppose que $l' > 0$ (le cas négatif est analogue).

$|g(x) - l'| \leqslant \varepsilon$ donc :

$-\varepsilon \leqslant g(x) - l' \leqslant \varepsilon$ 

puis $-\varepsilon + l' \leqslant g(x)  \leqslant \varepsilon + l'$

ensuite, $\dfrac{1}{\varepsilon + l'} \leqslant \dfrac{1}{g(x)}  \leqslant \dfrac{1}{-\varepsilon + l'}$ par décroissance de la fonction inverse sur $\R_+^*$.

mais en soustrayant $\dfrac{1}{l'}$, on a $\dfrac{1}{\varepsilon + l'} - \dfrac{1}{l'} \leqslant \dfrac{1}{g(x)} - \dfrac{1}{l'} \leqslant  \dfrac{1}{-\varepsilon + l'} - \dfrac{1}{l'}$

ensuite, $\dfrac{- \varepsilon}{(\varepsilon + l').l'} = \dfrac{l' - \varepsilon - l'}{(\varepsilon + l').l'} \leqslant \dfrac{1}{g(x)} - \dfrac{1}{l'} \leqslant  \dfrac{l' + \varepsilon - l'}{(-\varepsilon + l').l'} = \dfrac{ \varepsilon }{(-\varepsilon + l').l'} $

Mais $\dfrac{1}{(-\varepsilon + l').l'} \v \dfrac{1}{(\varepsilon + l').l'} \leqslant \dfrac{1}{l'.\dfrac{l'}{2}}$. 

On pose $M = \dfrac{1}{l'.\dfrac{l'}{2}}$ d'où $-M.\varepsilon \leqslant \dfrac{1}{g(x)} - \dfrac{1}{l'} \leqslant M.\varepsilon $

En considérant $\tilde{\varepsilon} = \dfrac{\varepsilon}{M}$, on conclut.

On remarque que l'hypothèse de majoration de $\varepsilon$ importe peu. En effet, si $\varepsilon > l'/2$, il suffit de prendre $\varepsilon_2 = l'/2$ et le $\eta$ en découlant conviendra. 
</Hideable>


<Item type='proposition' titre='limite de fonction et composition' searchDesc="opération">

Si $h$ est définie sur $J$ un intervalle de $\R$ tel que $l \in J$, que $\limm{x \to a} f(x) = l$ et que Si $\limm{x \to l} h(x) = l'$, alors :

$$
\limm{x \to a} (h \circ f) (x)  = \limm{y \to f(a)} h (y) =  l'
$$
</Item>

<Hideable type='démonstration' titre=''>

Soient $\varepsilon_f > 0$, $\varepsilon_h > 0$, $\eta_f$ et $\eta_h$ convenant pour la continuité de $f$ en $a$ et la continuité de $h$ en $l$. On considère $x \in I$ tel que $|x - a| \leqslant \eta_f$

$$
\begin{cases}
|f(x) - l| \leqslant \varepsilon_f
\\
|f(x) - l| < \eta_h \Rightarrow |h(f(x)) - l'| < \varepsilon_h
\end{cases}
$$

On remarque que choisir $\varepsilon_f = \eta_h$ convient. D'où le résultat.

</Hideable>


<Item type='proposition' titre='limites de fonctions et inégalités'>

Soit $J \subset I$ un intervalle ouvert contenant $a$. On suppose que $\limm{x \to a} f(x) = l \in \R$ et que $\limm{x \to a} g(x) = l' \in \R$.

Si : $\forall x \in J \v f(x) \leqslant g(x)$, alors $l \leqslant l'$

</Item>

<Hideable type='démonstration' titre=''>

Soit $\varepsilon > 0$, il existe $\eta_f$ et $\eta_g$ convenant pour la limite de $f$ et de $g$ en $a$.

On pose $\eta = \min(\eta_f \v \eta_g)$

On a donc, si $x \in I$ tel que $|x - a| < \eta$

$$
\begin{cases}
|f(x) - l| \leqslant \varepsilon
\\
|g(x) - l'| \leqslant \varepsilon
\end{cases}
$$

mais donc,

$$
\begin{cases}
    -\varepsilon \leqslant f(x) - l \leqslant \varepsilon
    \\
    -\varepsilon \leqslant g(x) - l' \leqslant \varepsilon
\end{cases}
$$

puis, 

$$
\begin{cases}
    l -\varepsilon \leqslant f(x) \leqslant l + \varepsilon
    \\
    l' -\varepsilon \leqslant g(x) \leqslant l' + \varepsilon
\end{cases}
$$

donc $l - \varepsilon \leqslant f(x) \leqslant g(x) \leqslant l' + \varepsilon $.

Mais comme ceci vaut pour tout $\varepsilon > 0$, on a bien $l \leqslant l'$

</Hideable>


<Item type='consequence' titre='limite de fonction et inégalité avec une constante'>

Soient $M \in \R$ et  $J \subset I$ un intervalle ouvert contenant $a$. On suppose que $\limm{x \to a} f(x) = l \in \R$.

Si : $\forall x \in J \v f(x) \leqslant M$, alors $l \leqslant M$
</Item>


<Hideable type='démonstration' titre=''>

Il s'agit de la propriété précédente appliquée à $g : x \mapsto M$ définie sur $I$.
</Hideable>


<Item type='proposition' titre='encadrement de fonction et limites' searchDesc="comparaison">

Soit $J \subset I$ un intervalle ouvert contenant $a$ et $h$ définie sur $I$. On suppose que $\limm{x \to a} f(x) = \limm{x \to a} h(x) = l \in \R$.

Si $\forall x \in J \v f(x) \leqslant g(x) \leqslant h(x)$, alors $g(x)$ tend vers $l$ quand $x$ tend vers $a$.

</Item>

<Hideable type='démonstration' titre=''>

**Montrons qu'il y a convergence :** Soit $\varepsilon > 0$ et soient $\eta_f$ et $\eta_h$ convenant pour la limite de $f$ et de $h$ en $a$.

On pose $\eta = \min(\eta_f \v \eta_h)$. Soit $x \in I$ tel que $|x-a| < \eta$,

$$
\begin{cases}
-\varepsilon \leqslant f(x) - l \leqslant \varepsilon
\\
-\varepsilon \leqslant h(x) - l \leqslant \varepsilon
\end{cases}
$$

puis,

$$
\begin{cases}
    l -\varepsilon \leqslant f(x) \leqslant l + \varepsilon
    \\
    l -\varepsilon \leqslant h(x) \leqslant l + \varepsilon
\end{cases}
$$

On a donc : $l -\varepsilon \leqslant f(x) \leqslant g(x) \leqslant h(x) \leqslant l + \varepsilon$

On a bien l'encadrement voulu, d'où : $\limm{x \to a} g(x) = l$

</Hideable>


<Item type='proposition' titre='limite infinie de fonction et comparaison' searchDesc="encadrement">

Supposons que $\limm{x \to b} f(x) = + \infty$ et que : $f(x) \leqslant g(x) \v \forall x \in I$. 

On a $\limm{x \to b} g(x) = + \infty$

</Item>

<Hideable type='démonstration' titre=''>

Soit $A \in \R$, il existe $B$ tel que, si $x \in I$ et $x > B$, alors $f(x) > A$. Mais donc $g(x) \geqslant f(x) > A$ d'où $\limm{x \to b} g(x) = + \infty$

</Hideable>

<Remarque titre=''>

Les propriétés vues jusqu'à maintenant en le point $b$ restent valables en $\pm \infty$.
</Remarque>


<Item type='theoreme' titre='limite monotone' searchDesc="fonction croissante décroissante bornée">

On suppose que $I = \R$

Si $f$ est croissante alors une et une seule des deux propriétés est vraie:

$\cd$ $\limm{x \to + \infty} f(x) = + \infty$

$\cd$ $f$ converge en $+ \infty$.

</Item>

<Hideable type='démonstration' titre=''>

On procède par disjonction de cas :

$\cd$ **Cas 1 - $f$ est majorée :** on note $l$ la quantité $\sup_{x \in \R}(f(x))$.

Soit $\varepsilon > 0 $, il existe $A \in \R$ tel que $l - \varepsilon \leqslant f(A) < l$ (car sinon $l - \varepsilon < l$ serait un majorant plus petit que la borne supérieur ce qui est absurde).

Mais donc, si $x > A$, $l - \varepsilon \leqslant f(A) \leqslant f(x) \leqslant l$ par croissance de $f$.

$\cd$ **Cas 2 - $f$ n'est pas majorée :** la définition de la majoration s'écrit : $\exists M \in \R \mid \forall x \in \R \v f(x) \leqslant M$.

Sa négation donne donc $\forall M \in \R \v \exists x \in \R \mid f(x) > M$

Soit $A > 0$, il existe $x_0 \in \R$ tel que $f(x_0) > A$. Mais donc, par croissance de $f$, si $x > x_0$, $A < f(x_0) \leqslant f(x)$. On a donc $B = x_0$ qui convient pour la définition de la limite infine en $+ \infty$.


</Hideable>


<Item type='consequence' titre=''>

On suppose que $I = \R$

Si $f$ est croissante et majorée, alors $f$ converge en $+ \infty$.
</Item>
